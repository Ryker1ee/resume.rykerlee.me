<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ryker Lee - Courses</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- NAV -->
  <nav>
    <div class="nav-wrapper">
      <div class="nav-container">
        <a href="index.html">Home</a>
        <a href="experience.html">Experience</a>
        <a class="active" href="courses.html">Courses</a>
        <a href="projects.html">Projects</a>
      </div>
    </div>
  </nav>

  <!-- MAIN COURSES CONTENT -->
  <main class="container">
    <h1>Courses</h1>

    <section aria-labelledby="inprog-heading">
      <h2 id="inprog-heading">Currently Taking</h2>
      <div class="course-card">
        <ul id="courses-in-progress" class="course-list"></ul>
      </div>
    </section>

    <section aria-labelledby="completed-heading">
      <h2 id="completed-heading">Completed</h2>
      <div class="course-card">
        <ul id="courses-completed" class="course-list"></ul>
      </div>
    </section>
  </main>

<script>
fetch('database.json')
  .then(res => res.json())
  .then(data => {
    const container = document.querySelector('.container');

    function makeSection(title, courses) {
      const card = document.createElement('div');
      card.className = 'course-card';

      const h3 = document.createElement('h3');
      h3.textContent = title;
      card.appendChild(h3);

      const ul = document.createElement('ul');
      ul.className = 'course-list';

      courses.forEach(c => {
        const li = document.createElement('li');

        const titleSpan = document.createElement('span');
        titleSpan.className = 'course-title';
        titleSpan.textContent = `${c.code}: ${c.title}`;
        li.appendChild(titleSpan);

        const meta = document.createElement('span');
        meta.className = 'meta';

        const cat = document.createElement('span');
        cat.className = 'pill';
        cat.textContent = c.category;
        meta.appendChild(cat);

        const term = document.createElement('span');
        term.className = 'pill';
        term.textContent = c.term;
        meta.appendChild(term);

        const credits = document.createElement('span');
        credits.className = 'pill';
        credits.textContent = `${c.credits} cr`;
        meta.appendChild(credits);

        li.appendChild(meta);
        ul.appendChild(li);
      });

      card.appendChild(ul);
      container.appendChild(card);
    }

    // split by prefix
    const cscCourses = data.courses.filter(c => c.code.startsWith("CSC"));
    const otherCourses = data.courses.filter(c => !c.code.startsWith("CSC"));

    // split into in-progress vs completed
    const inProgressCSC = cscCourses.filter(c => c.status === "In Progress");
    const completedCSC = cscCourses.filter(c => c.status === "Completed");
    const inProgressOther = otherCourses.filter(c => c.status === "In Progress");
    const completedOther = otherCourses.filter(c => c.status === "Completed");

    // build the page
    const h2 = document.createElement('h2');
    h2.textContent = 'Courses';
    container.appendChild(h2);

    if (inProgressCSC.length) makeSection('CSC (Currently Taking)', inProgressCSC);
    if (inProgressOther.length) makeSection('Other (Currently Taking)', inProgressOther);

    if (completedCSC.length) makeSection('CSC (Completed)', completedCSC);
    if (completedOther.length) makeSection('Other (Completed)', completedOther);
  })
  .catch(err => {
    console.error(err);
    document.querySelector('.container').textContent = 'Error loading courses.';
  });
</script>
</body>
</html>
